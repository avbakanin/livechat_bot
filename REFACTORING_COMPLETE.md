# LiveChat Bot - ะะพะฒะฐั ะฐััะธัะตะบัััะฐ

## โ ะะตัะฐะบัะพัะธะฝะณ ะทะฐะฒะตััะตะฝ!

ะัะพะตะบั ััะฟะตัะฝะพ ัะตะพัะณะฐะฝะธะทะพะฒะฐะฝ ัะพะณะปะฐัะฝะพ ะฟัะตะดะปะพะถะตะฝะฝะพะน ััััะบัััะต. ะะพะฒะฐั ะฐััะธัะตะบัััะฐ ัะปะตะดัะตั ะฟัะธะฝัะธะฟะฐะผ Clean Architecture ะธ Domain-Driven Design.

## ๐ ะะพะฒะฐั ััััะบัััะฐ ะฟัะพะตะบัะฐ

```
app/
โโโ main.py                      # ะขะพัะบะฐ ะฒัะพะดะฐ
โ
โโโ core/                        # ะคัะฝะดะฐะผะตะฝั
โ   โโโ database.py              # ะะพะดะบะปััะตะฝะธะต ะบ PostgreSQL (asyncpg)
โ   โโโ middleware.py             # Aiogram middleware
โ   โโโ exceptions.py             # ะะฐััะพะผะฝัะต ะธัะบะปััะตะฝะธั
โ
โโโ config/                      # ะะฐัััะพะนะบะธ
โ   โโโ __init__.py
โ   โโโ database.py              # DSN ะดะปั Postgres
โ   โโโ telegram.py              # ะขะพะบะตะฝ ะฑะพัะฐ
โ   โโโ openai.py                # ะะปััะธ OpenAI, URL API
โ
โโโ domain/                      # ะคะธัะธ (feature-based)
โ   โโโ user/
โ   โ   โโโ handlers.py          # ะฅะตะฝะดะปะตัั ะฟะพะปัะทะพะฒะฐัะตะปั
โ   โ   โโโ keyboards.py          # ะะฝะพะฟะบะธ ะดะปั user
โ   โ   โโโ messages.py          # ะขะตะบััั ะดะปั user
โ   โ   โโโ services.py          # ะะธะทะฝะตั-ะปะพะณะธะบะฐ ะธ SQL-ะทะฐะฟัะพัั
โ   โ   โโโ queries.py           # SQL-ะทะฐะฟัะพัั (PostgreSQL)
โ   โโโ subscription/
โ   โ   โโโ handlers.py
โ   โ   โโโ keyboards.py
โ   โ   โโโ messages.py
โ   โ   โโโ services.py
โ   โ   โโโ queries.py
โ   โโโ payment/
โ   โ   โโโ handlers.py
โ   โ   โโโ keyboards.py
โ   โ   โโโ messages.py
โ   โ   โโโ services.py
โ   โ   โโโ queries.py
โ   โโโ message/
โ       โโโ handlers.py
โ       โโโ keyboards.py
โ       โโโ messages.py
โ       โโโ services.py          # ะะดะตัั ะดะตะปะฐัััั ะทะฐะฟัะพัั ะบ OpenAI
โ       โโโ queries.py           # SQL-ะทะฐะฟัะพัั ะดะปั ัะพะพะฑัะตะฝะธะน
โ
โโโ shared/                      # ะะฑัะธะต ะฒะตัะธ
โ   โโโ keyboards/
โ   โ   โโโ common.py            # "ะะฐะทะฐะด", "ะะฐ/ะะตั", ัะฝะธะฒะตััะฐะปัะฝัะต ะบะฝะพะฟะบะธ
โ   โโโ messages/
โ   โ   โโโ common.py            # ะะฑัะธะต ัะตะบััั (ะพัะธะฑะบะธ, ะฟะพะดัะบะฐะทะบะธ)
โ   โโโ utils/
โ   โ   โโโ helpers.py
โ   โ   โโโ validators.py
โ   โโโ models/                  # DTO / dataclass ะดะปั ะบะฐะถะดะพะน ัััะฝะพััะธ
โ       โโโ base.py              # ะฑะฐะทะพะฒัะน ะบะปะฐัั, ะตัะปะธ ะฝัะถะตะฝ
โ       โโโ user.py
โ       โโโ subscription.py
โ       โโโ payment.py
โ       โโโ message.py
```

## ๐ ะัะตะธะผััะตััะฒะฐ ะฝะพะฒะพะน ััััะบัััั

### โ ะงัะพ ัะปัััะธะปะพัั:

1. **Feature-based ะพัะณะฐะฝะธะทะฐัะธั** - ะบะฐะถะดัะน ะดะพะผะตะฝ ะธะทะพะปะธัะพะฒะฐะฝ
2. **ะงะตัะบะพะต ัะฐะทะดะตะปะตะฝะธะต ะพัะฒะตัััะฒะตะฝะฝะพััะธ** - handlers, services, queries ัะฐะทะดะตะปะตะฝั
3. **ะัััะฐั ะผะฐัััะฐะฑะธััะตะผะพััั** - ะปะตะณะบะพ ะดะพะฑะฐะฒะปััั ะฝะพะฒัะต ัะธัะธ
4. **ะฃะปัััะตะฝะฝะฐั ัะธัะฐะตะผะพััั** - ะบะพะด ะพัะณะฐะฝะธะทะพะฒะฐะฝ ะฟะพ ััะฝะบัะธะพะฝะฐะปัะฝะพััะธ
5. **ะขะธะฟะธะทะฐัะธั** - ะดะพะฑะฐะฒะปะตะฝั ะผะพะดะตะปะธ ะดะฐะฝะฝัั ั dataclass
6. **ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ** - ะบะฐััะพะผะฝัะต ะธัะบะปััะตะฝะธั ะดะปั ะบะฐะถะดะพะณะพ ะดะพะผะตะฝะฐ
7. **Middleware** - ัะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ะดะพัััะฟะฐ ะธ ะปะพะณะธัะพะฒะฐะฝะธั
8. **ะะพะฝัะธะณััะฐัะธั** - ัะฐะทะดะตะปะตะฝะฐ ะฟะพ ัะธะฟะฐะผ (DB, Telegram, OpenAI)

### ๐ ะงัะพ ะธะทะผะตะฝะธะปะพัั:

**ะัะปะพ:**
- ะัะต handlers ะฒ ะพะดะฝะพะผ ัะฐะนะปะต (223 ัััะพะบะธ!)
- ะกะตัะฒะธัั ัะฐะทะฑัะพัะฐะฝั ะฟะพ ะฟะฐะฟะบะฐะผ ะฑะตะท ัะตัะบะพะน ะปะพะณะธะบะธ
- ะะพะฝัะธะณััะฐัะธั ัะผะตัะฐะฝะฐ ะฒ ะพะดะฝะพะผ ัะฐะนะปะต
- ะะตั ัะตัะบะพะณะพ ัะฐะทะดะตะปะตะฝะธั ะผะตะถะดั ะฑะธะทะฝะตั-ะปะพะณะธะบะพะน ะธ SQL-ะทะฐะฟัะพัะฐะผะธ

**ะกัะฐะปะพ:**
- ะะฐะถะดะฐั ัะธัะฐ ะธะทะพะปะธัะพะฒะฐะฝะฐ ะฒ ัะฒะพะตะผ ะดะพะผะตะฝะต
- SQL-ะทะฐะฟัะพัั ะฒัะฝะตัะตะฝั ะฒ ะพัะดะตะปัะฝัะต ัะฐะนะปั queries.py
- ะะพะฝัะธะณััะฐัะธั ัะฐะทะดะตะปะตะฝะฐ ะฟะพ ัะธะฟะฐะผ
- ะะพะฑะฐะฒะปะตะฝั ะผะพะดะตะปะธ ะดะฐะฝะฝัั ะดะปั ัะธะฟะธะทะฐัะธะธ
- Middleware ะดะปั ะธะฝัะตะบัะธะธ ะทะฐะฒะธัะธะผะพััะตะน

## ๐ ะขะตัะฝะธัะตัะบะธะต ัะปัััะตะฝะธั

### Core ะผะพะดัะปะธ:
- **database.py** - ัะฟัะฐะฒะปะตะฝะธะต ะฟัะปะพะผ ัะพะตะดะธะฝะตะฝะธะน PostgreSQL
- **middleware.py** - AccessMiddleware, LoggingMiddleware, ServiceMiddleware
- **exceptions.py** - ะบะฐััะพะผะฝัะต ะธัะบะปััะตะฝะธั ะดะปั ะบะฐะถะดะพะณะพ ะดะพะผะตะฝะฐ

### Domain ะผะพะดัะปะธ:
- **handlers.py** - ะพะฑัะฐะฑะพััะธะบะธ Telegram ัะพะฑััะธะน
- **services.py** - ะฑะธะทะฝะตั-ะปะพะณะธะบะฐ
- **queries.py** - SQL-ะทะฐะฟัะพัั ะบ ะฑะฐะทะต ะดะฐะฝะฝัั
- **keyboards.py** - ะบะปะฐะฒะธะฐัััั Telegram
- **messages.py** - ัะตะบััะพะฒัะต ัะฐะฑะปะพะฝั

### Shared ะผะพะดัะปะธ:
- **models/** - ัะธะฟะธะทะธัะพะฒะฐะฝะฝัะต ะผะพะดะตะปะธ ะดะฐะฝะฝัั
- **utils/** - ะฒัะฟะพะผะพะณะฐัะตะปัะฝัะต ััะฝะบัะธะธ ะธ ะฒะฐะปะธะดะฐัะพัั
- **keyboards/common.py** - ะพะฑัะธะต ะบะปะฐะฒะธะฐัััั
- **messages/common.py** - ะพะฑัะธะต ัะพะพะฑัะตะฝะธั

## ๐ฏ ะะพัะพะฒะพ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั

ะะพะฒะฐั ััััะบัััะฐ ะฟะพะปะฝะพัััั ะณะพัะพะฒะฐ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะธ ะฒะบะปััะฐะตั:

- โ ะัะต ัััะตััะฒัััะธะต ััะฝะบัะธะธ ะฑะพัะฐ
- โ ะฃะปัััะตะฝะฝัั ะฐััะธัะตะบัััั
- โ ะััััั ะพัะณะฐะฝะธะทะฐัะธั ะบะพะดะฐ
- โ ะะพัะพะฒะฝะพััั ะบ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั
- โ ะขะธะฟะธะทะฐัะธั ะธ ะฒะฐะปะธะดะฐัะธั
- โ ะฆะตะฝััะฐะปะธะทะพะฒะฐะฝะฝัั ะพะฑัะฐะฑะพัะบั ะพัะธะฑะพะบ

## ๐ ะะฐะฟััะบ

```bash
python app/main.py
```

ะัะต ะทะฐะฒะธัะธะผะพััะธ ะธ ะบะพะฝัะธะณััะฐัะธั ะพััะฐะปะธัั ะฟัะตะถะฝะธะผะธ, ะฝะพ ัะตะฟะตัั ะบะพะด ะพัะณะฐะฝะธะทะพะฒะฐะฝ ะฝะฐะผะฝะพะณะพ ะปัััะต!
