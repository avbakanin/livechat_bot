# Debug Info Module

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ `shared/metrics/debug_info.py`.

## üéØ –¶–µ–ª—å

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, —É–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –∏ —Å–¥–µ–ª–∞—Ç—å debug-—Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º–∏ –≤–æ –≤—Å–µ—Ö —á–∞—Å—Ç—è—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## üì¶ –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

1. **`get_user_debug_info(user_id, user, cached_user)`** - –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
2. **`get_subscription_debug_info(user_id, status, expires_at)`** - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ  
3. **`get_personality_debug_info(user_id, profile)`** - –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ª–∏—á–Ω–æ—Å—Ç–∏
4. **`get_general_debug_info(title, data)`** - –û–±—â–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
5. **`get_error_debug_info(error, context)`** - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

### –ö–ª–∞—Å—Å `DebugInfoGenerator`:

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Å—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```python
from shared.metrics.debug_info import get_user_debug_info

# –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –∫–æ–º–∞–Ω–¥—ã
user = await user_service.get_user(user_id)
debug_info = get_user_debug_info(user_id, user, cached_user)
await message.answer(debug_info)
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```python
from shared.metrics.debug_info import debug_info_generator

# –ö–∞—Å—Ç–æ–º–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
debug_info = debug_info_generator.format_general_debug_info(
    "–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã", 
    {"status": "running", "users": 1000}
)
```

## üìä –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ:
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∏–∑ –ë–î (ID, username, –ø–æ–¥–ø–∏—Å–∫–∞, —Å–æ–≥–ª–∞—Å–∏–µ, etc.)
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞ (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –ª–∏—á–Ω–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- ‚úÖ –î–∞—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ:
- ‚úÖ –°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –î–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è
- ‚úÖ –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ –ø–æ–¥–ø–∏—Å–∫–∞

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∏—á–Ω–æ—Å—Ç–∏:
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ—Ä—Ç
- ‚úÖ –¢–æ–ø-5 –¥–æ–º–∏–Ω–∏—Ä—É—é—â–∏—Ö —á–µ—Ä—Ç
- ‚úÖ –ó–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä—Ç —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ 2 –∑–Ω–∞–∫–æ–≤

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–ú–æ–¥—É–ª—å —É–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤:
- ‚úÖ `app/domain/user/handlers.py` - –∫–æ–º–∞–Ω–¥–∞ debug
- ‚úÖ `shared/metrics/__init__.py` - —ç–∫—Å–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–π

## üìù –ü—Ä–∏–º–µ—Ä—ã

–°–º–æ—Ç—Ä–∏—Ç–µ `examples/debug_info_usage.py` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

## üé® –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫—Ä–∞—Å–∏–≤–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ —Å —ç–º–æ–¥–∑–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π, –≥–æ—Ç–æ–≤—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram.

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è

–°—Ç–∞—Ä—ã–π –∫–æ–¥:
```python
debug_info = f"üîç Debug –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}:\n\n"
if user:
    debug_info += f"üìä –î–∞–Ω–Ω—ã–µ –∏–∑ –ë–î:\n"
    # ... –º–Ω–æ–≥–æ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
```

–ù–æ–≤—ã–π –∫–æ–¥:
```python
debug_info = get_user_debug_info(user_id, user, cached_user)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–¥ —Å—Ç–∞–ª –≤ 10 —Ä–∞–∑ –∫–æ—Ä–æ—á–µ –∏ –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º! üéâ
