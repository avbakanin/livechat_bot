# ๐ ะะพะผะฐะฝะดะฐ /language - ะัะบะพะฒะพะดััะฒะพ

## ๐ ะะฑะทะพั

ะะพะผะฐะฝะดะฐ `/language` ะฟะพะทะฒะพะปัะตั ะฟะพะปัะทะพะฒะฐัะตะปัะผ **ะฟัะธะฝัะดะธัะตะปัะฝะพ ะฒัะฑะธัะฐัั ัะทัะบ ะธะฝัะตััะตะนัะฐ** ะฑะพัะฐ. ะญัะพ ะพัะพะฑะตะฝะฝะพ ะฟะพะปะตะทะฝะพ ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน, ะบะพัะพััะต ัะพััั ะธะทะผะตะฝะธัั ัะทัะบ, ะพัะปะธัะฝัะน ะพั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพะฟัะตะดะตะปะตะฝะฝะพะณะพ ะฟะพ ะธั Telegram ะฝะฐัััะพะนะบะฐะผ.

## ๐ ะคัะฝะบัะธะพะฝะฐะปัะฝะพััั

### **ะัะฝะพะฒะฝัะต ะฒะพะทะผะพะถะฝะพััะธ:**
- โ **ะัะธะฝัะดะธัะตะปัะฝัะน ะฒัะฑะพั ัะทัะบะฐ** - ะฟะพะปัะทะพะฒะฐัะตะปั ะผะพะถะตั ะฒัะฑัะฐัั ะปัะฑะพะน ะธะท 5 ะฟะพะดะดะตัะถะธะฒะฐะตะผัั ัะทัะบะพะฒ
- โ **ะะธะทัะฐะปัะฝะฐั ะธะฝะดะธะบะฐัะธั** - ัะตะบััะธะน ัะทัะบ ะพัะผะตัะตะฝ ะณะฐะปะพัะบะพะน โ
- โ **ะะณะฝะพะฒะตะฝะฝะฐั ัะผะตะฝะฐ** - ัะทัะบ ะผะตะฝัะตััั ััะฐะทั ะฟะพัะปะต ะฒัะฑะพัะฐ
- โ **ะะฝัะตะณัะฐัะธั ั help** - ะดะพัััะฟะฝะฐ ัะตัะตะท ะบะฝะพะฟะบั "๐ ะัะฑัะฐัั ัะทัะบ" ะฒ help ะผะตะฝั
- โ **ะะตััะธะบะธ** - ะทะฐะฟะธััะฒะฐะตััั ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะบะพะผะฐะฝะดั ะธ ัะผะตะฝะฐ ัะทัะบะพะฒ

### **ะะพะดะดะตัะถะธะฒะฐะตะผัะต ัะทัะบะธ:**
- ๐ท๐บ **ะัััะบะธะน** (`ru`) - ะพัะฝะพะฒะฝะพะน ัะทัะบ
- ๐ฌ๐ง **ะะฝะณะปะธะนัะบะธะน** (`en`) - ะผะตะถะดัะฝะฐัะพะดะฝัะน
- ๐ท๐ธ **ะกะตัะฑัะบะธะน** (`sr`) - ะฑะฐะปะบะฐะฝัะบะธะน ัะตะณะธะพะฝ
- ๐ฉ๐ช **ะะตะผะตัะบะธะน** (`de`) - ัะตะฝััะฐะปัะฝะฐั ะะฒัะพะฟะฐ
- ๐ช๐ธ **ะัะฟะฐะฝัะบะธะน** (`es`) - ะปะฐัะธะฝัะบะฐั ะะผะตัะธะบะฐ

## ๐ฏ ะัะฟะพะปัะทะพะฒะฐะฝะธะต

### **ะกะฟะพัะพะฑ 1: ะะพะผะฐะฝะดะฐ**
```
/language
```

### **ะกะฟะพัะพะฑ 2: ะงะตัะตะท Help ะผะตะฝั**
1. ะัะฟัะฐะฒััะต `/help`
2. ะะฐะถะผะธัะต ะบะฝะพะฟะบั "๐ ะัะฑัะฐัั ัะทัะบ"
3. ะัะฑะตัะธัะต ะฝัะถะฝัะน ัะทัะบ

## ๐ง ะขะตัะฝะธัะตัะบะฐั ัะตะฐะปะธะทะฐัะธั

### **ะคะฐะนะปั:**
- **`app/domain/user/handlers.py`** - ะพะฑัะฐะฑะพััะธะบะธ ะบะพะผะฐะฝะดั ะธ callbacks
- **`app/shared/keyboards/language.py`** - ะบะปะฐะฒะธะฐัััั ะฒัะฑะพัะฐ ัะทัะบะฐ
- **`locales/*/translations.json`** - ะฟะตัะตะฒะพะดั ะดะปั ะฒัะตั ัะทัะบะพะฒ

### **ะะฑัะฐะฑะพััะธะบะธ:**
```python
@router.message(Command(commands=["language"]))
async def cmd_language(message: Message, i18n: I18nMiddleware):
    """Handle /language command to change interface language."""

@router.callback_query(F.data.startswith("lang_"))
async def handle_language_selection(callback: CallbackQuery, i18n: I18nMiddleware):
    """Handle language selection callback."""

@router.callback_query(F.data == "choose_language")
async def choose_language_help(callback: CallbackQuery, i18n: I18nMiddleware):
    """Handle choose language help callback."""
```

### **ะะปะฐะฒะธะฐัััั:**
```python
def get_language_keyboard() -> InlineKeyboardMarkup:
    """Create language selection keyboard."""

def get_language_keyboard_with_current(current_language: str) -> InlineKeyboardMarkup:
    """Create language selection keyboard with current language marked."""
```

## ๐ ะะตัะตะฒะพะดั

### **ะะปััะธ ะฟะตัะตะฒะพะดะพะฒ:**
```json
{
  "commands": {
    "help": {
      "language_command": "/language - ะัะฑัะฐัั ัะทัะบ ะธะฝัะตััะตะนัะฐ"
    },
    "language": {
      "title": "๐ ะัะฑะพั ัะทัะบะฐ",
      "description": "ะัะฑะตัะธัะต ัะทัะบ ะธะฝัะตััะตะนัะฐ:",
      "changed": "โ ะฏะทัะบ ะธะทะผะตะฝะตะฝ ะฝะฐ {language}",
      "current": "ะขะตะบััะธะน ัะทัะบ: {language}",
      "available_languages": "ะะพัััะฟะฝัะต ัะทัะบะธ:"
    }
  },
  "buttons": {
    "language_ru": "๐ท๐บ ะัััะบะธะน",
    "language_en": "๐ฌ๐ง English",
    "language_sr": "๐ท๐ธ ะกัะฟัะบะธ",
    "language_de": "๐ฉ๐ช Deutsch",
    "language_es": "๐ช๐ธ Espaรฑol",
    "choose_language": "๐ ะัะฑัะฐัั ัะทัะบ"
  }
}
```

### **ะัะธะผะตัั ะฟะตัะตะฒะพะดะพะฒ:**

| ะฏะทัะบ | ะะฐะณะพะปะพะฒะพะบ | ะะฟะธัะฐะฝะธะต | ะะฝะพะฟะบะฐ |
|------|-----------|----------|--------|
| ๐ท๐บ ะัััะบะธะน | "๐ ะัะฑะพั ัะทัะบะฐ" | "ะัะฑะตัะธัะต ัะทัะบ ะธะฝัะตััะตะนัะฐ:" | "๐ ะัะฑัะฐัั ัะทัะบ" |
| ๐ฌ๐ง English | "๐ Language Selection" | "Choose interface language:" | "๐ Choose language" |
| ๐ท๐ธ ะกัะฟัะบะธ | "๐ ะะทะฑะพั ัะตะทะธะบะฐ" | "ะะทะฐะฑะตัะธัะต ัะตะทะธะบ ะธะฝัะตััะตััะฐ:" | "๐ ะะทะฐะฑะตัะธ ัะตะทะธะบ" |
| ๐ฉ๐ช Deutsch | "๐ Sprachauswahl" | "Interface-Sprache wรคhlen:" | "๐ Sprache wรคhlen" |
| ๐ช๐ธ Espaรฑol | "๐ Selecciรณn de idioma" | "Elige el idioma de la interfaz:" | "๐ Elegir idioma" |

## ๐จ ะะฝัะตััะตะนั

### **ะะปะฐะฒะธะฐัััะฐ ะฒัะฑะพัะฐ ัะทัะบะฐ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ท๐บ ะัััะบะธะน โ  โ  ๐ฌ๐ง English    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ท๐ธ ะกัะฟัะบะธ     โ  ๐ฉ๐ช Deutsch     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ช๐ธ Espaรฑol                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โฉ๏ธ ะะฐะทะฐะด                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### **ะกะพะพะฑัะตะฝะธั:**
- **ะะฐะณะพะปะพะฒะพะบ:** "๐ ะัะฑะพั ัะทัะบะฐ"
- **ะะฟะธัะฐะฝะธะต:** "ะัะฑะตัะธัะต ัะทัะบ ะธะฝัะตััะตะนัะฐ:"
- **ะขะตะบััะธะน ัะทัะบ:** "ะขะตะบััะธะน ัะทัะบ: RU"
- **ะะพะดัะฒะตัะถะดะตะฝะธะต:** "โ ะฏะทัะบ ะธะทะผะตะฝะตะฝ ะฝะฐ ะัััะบะธะน"

## ๐ ะะตััะธะบะธ

### **ะะฐะฟะธััะฒะฐะตะผัะต ัะพะฑััะธั:**
- **`language_command`** - ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะบะพะผะฐะฝะดั `/language`
- **`language_changed_{lang}`** - ัะผะตะฝะฐ ัะทัะบะฐ (ะฝะฐะฟัะธะผะตั, `language_changed_en`)

### **ะัะธะผะตัั ะผะตััะธะบ:**
```python
safe_record_user_interaction(user_id, "language_command")
safe_record_user_interaction(user_id, "language_changed_en")
```

## ๐ ะะพะณะธะบะฐ ัะฐะฑะพัั

### **1. ะะพะผะฐะฝะดะฐ `/language`:**
1. ะะพะปัะทะพะฒะฐัะตะปั ะพัะฟัะฐะฒะปัะตั `/language`
2. ะะพั ะพะฟัะตะดะตะปัะตั ัะตะบััะธะน ัะทัะบ
3. ะะพะบะฐะทัะฒะฐะตั ะบะปะฐะฒะธะฐัััั ั ะพัะผะตัะตะฝะฝัะผ ัะตะบััะธะผ ัะทัะบะพะผ
4. ะะฐะฟะธััะฒะฐะตั ะผะตััะธะบั ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะบะพะผะฐะฝะดั

### **2. ะัะฑะพั ัะทัะบะฐ:**
1. ะะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั ะบะฝะพะฟะบั ัะทัะบะฐ (ะฝะฐะฟัะธะผะตั, `lang_en`)
2. ะะพั ะธะทะฒะปะตะบะฐะตั ะบะพะด ัะทัะบะฐ (`en`)
3. ะฃััะฐะฝะฐะฒะปะธะฒะฐะตั ะฝะพะฒัะน ัะทัะบ ะฒ ะณะปะพะฑะฐะปัะฝะพะผ ะธ ะปะพะบะฐะปัะฝะพะผ i18n
4. ะะฑะฝะพะฒะปัะตั ัะพะพะฑัะตะฝะธะต ั ะฟะพะดัะฒะตัะถะดะตะฝะธะตะผ
5. ะะฐะฟะธััะฒะฐะตั ะผะตััะธะบั ัะผะตะฝั ัะทัะบะฐ

### **3. ะงะตัะตะท Help ะผะตะฝั:**
1. ะะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั "๐ ะัะฑัะฐัั ัะทัะบ" ะฒ help
2. ะะพั ะฟะพะบะฐะทัะฒะฐะตั ัั ะถะต ะบะปะฐะฒะธะฐัััั ะฒัะฑะพัะฐ ัะทัะบะฐ
3. ะะพะณะธะบะฐ ัะฐะฑะพัั ะธะดะตะฝัะธัะฝะฐ ะบะพะผะฐะฝะดะต `/language`

## โก ะะฟัะธะผะธะทะฐัะธั

### **ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ:**
- **`MessageNotModified`** - ะธะณะฝะพัะธััะตััั, ะฟัะพััะพ ะฟะพะดัะฒะตัะถะดะฐะตััั
- **`MessageToEditNotFound`** - ะฟะพะบะฐะทัะฒะฐะตััั alert "ะกะพะพะฑัะตะฝะธะต ัััะฐัะตะปะพ"
- **ะััะณะธะต ะพัะธะฑะบะธ** - ะปะพะณะธัััััั ะธ ะฟะพะบะฐะทัะฒะฐะตััั alert "โ ะัะธะฑะบะฐ ะพะฑะฝะพะฒะปะตะฝะธั"

### **ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั:**
- **ะััะธัะพะฒะฐะฝะธะต** - ะฟะตัะตะฒะพะดั ะทะฐะณััะถะฐัััั ะฒ ะฟะฐะผััั
- **ะััััะฐั ัะผะตะฝะฐ** - ัะทัะบ ะผะตะฝัะตััั ะผะณะฝะพะฒะตะฝะฝะพ
- **ะะฟัะธะผะธะทะธัะพะฒะฐะฝะฝัะต ะบะปะฐะฒะธะฐัััั** - ัะพะทะดะฐัััั ัะพะปัะบะพ ะฟัะธ ะฝะตะพะฑัะพะดะธะผะพััะธ

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### **ะัะพะฒะตัะตะฝะฝัะต ะฐัะฟะตะบัั:**
- โ **ะะผะฟะพัั ะผะพะดัะปะตะน** - ะฒัะต ะผะพะดัะปะธ ะทะฐะณััะถะฐัััั
- โ **ะะพัััะฟะฝัะต ัะทัะบะธ** - ะฒัะต 5 ัะทัะบะพะฒ ะฟัะธัััััะฒััั
- โ **ะะตัะตะฒะพะดั** - ะฒัะต ะบะปััะธ ะฟะตัะตะฒะตะดะตะฝั ะฝะฐ ะบะฐะถะดัะน ัะทัะบ
- โ **ะะฝะพะฟะบะธ** - ะฒัะต ะบะฝะพะฟะบะธ ัะทัะบะพะฒ ัะฐะฑะพัะฐัั
- โ **ะะปะฐะฒะธะฐัััั** - ัะพะทะดะฐัััั ะบะพััะตะบัะฝะพ
- โ **ะกะผะตะฝะฐ ัะทัะบะฐ** - ัะฐะฑะพัะฐะตั ะผะณะฝะพะฒะตะฝะฝะพ
- โ **ะะฝัะตะณัะฐัะธั ั help** - ะบะพะผะฐะฝะดะฐ ะดะพะฑะฐะฒะปะตะฝะฐ ะฒ help

### **ะะตะทัะปััะฐัั ัะตััะธัะพะฒะฐะฝะธั:**
- **ะคัะฝะบัะธะพะฝะฐะป:** โ **100%** - ะฒัะต ัะตััั ะฟัะพัะปะธ
- **ะะฝัะตะณัะฐัะธั:** โ **100%** - ะบะพะผะฐะฝะดะฐ ะธะฝัะตะณัะธัะพะฒะฐะฝะฐ
- **ะะตัะตะฒะพะดั:** โ **100%** - ะฒัะต ัะทัะบะธ ะฟะพะดะดะตัะถะธะฒะฐัััั

## ๐ฏ ะัะตะธะผััะตััะฒะฐ

### **ะะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน:**
- **ะกะฒะพะฑะพะดะฐ ะฒัะฑะพัะฐ** - ะผะพะถะฝะพ ะฒัะฑัะฐัั ะปัะฑะพะน ัะทัะบ ะฝะตะทะฐะฒะธัะธะผะพ ะพั Telegram ะฝะฐัััะพะตะบ
- **ะฃะดะพะฑััะฒะพ** - ะดะพัััะฟะฝะพ ะบะฐะบ ะบะพะผะฐะฝะดะฐ ะธ ัะตัะตะท help ะผะตะฝั
- **ะะฐะณะปัะดะฝะพััั** - ัะตะบััะธะน ัะทัะบ ะพัะผะตัะตะฝ ะณะฐะปะพัะบะพะน
- **ะะณะฝะพะฒะตะฝะฝะพััั** - ัะทัะบ ะผะตะฝัะตััั ััะฐะทั

### **ะะปั ัะฐะทัะฐะฑะพััะธะบะพะฒ:**
- **ะะตััะธะบะธ** - ะพััะปะตะถะธะฒะฐะฝะธะต ะธัะฟะพะปัะทะพะฒะฐะฝะธั ัะทัะบะพะฒ
- **ะะฐััะธััะตะผะพััั** - ะปะตะณะบะพ ะดะพะฑะฐะฒะธัั ะฝะพะฒัะต ัะทัะบะธ
- **ะะฐะดะตะถะฝะพััั** - ะพะฑัะฐะฑะพัะบะฐ ะฒัะตั ะพัะธะฑะพะบ
- **ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั** - ะพะฟัะธะผะธะทะธัะพะฒะฐะฝะฝะฐั ัะฐะฑะพัะฐ

## ๐ ะะพัะพะฒะฝะพััั

### **โ ะะะขะะะ ะ ะะกะะะะฌะะะะะะะฎ:**
- **ะะพะผะฐะฝะดะฐ `/language`** ัะฐะฑะพัะฐะตั ะบะพััะตะบัะฝะพ
- **ะะปะฐะฒะธะฐัััั** ัะพะทะดะฐัััั ะธ ะพัะพะฑัะฐะถะฐัััั ะฟัะฐะฒะธะปัะฝะพ
- **ะะตัะตะฒะพะดั** ะฟะพะปะฝัะต ะดะปั ะฒัะตั 5 ัะทัะบะพะฒ
- **ะะฑัะฐะฑะพััะธะบะธ** ะธะฝัะตะณัะธัะพะฒะฐะฝั ะฒ ัะธััะตะผั
- **ะะตััะธะบะธ** ะทะฐะฟะธััะฒะฐัััั
- **ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ** ัะตะฐะปะธะทะพะฒะฐะฝะฐ
- **ะขะตััะธัะพะฒะฐะฝะธะต** ะฟัะพะนะดะตะฝะพ ััะฟะตัะฝะพ

### **๐ ะะะะฃะะฌะขะะข:**
**ะะพะผะฐะฝะดะฐ `/language` ะฟะพะปะฝะพัััั ะณะพัะพะฒะฐ ะบ ะฟัะพะดะฐะบัะตะฝั!**

ะะพะปัะทะพะฒะฐัะตะปะธ ัะตะฟะตัั ะผะพะณัั ะปะตะณะบะพ ะธ ัะดะพะฑะฝะพ ะฒัะฑะธัะฐัั ัะทัะบ ะธะฝัะตััะตะนัะฐ ะฑะพัะฐ, ััะพ ะทะฝะฐัะธัะตะปัะฝะพ ัะปัััะฐะตั ะฟะพะปัะทะพะฒะฐัะตะปััะบะธะน ะพะฟัั ะดะปั ะผะตะถะดัะฝะฐัะพะดะฝะพะน ะฐัะดะธัะพัะธะธ.

---

*ะะพะบัะผะตะฝัะฐัะธั ัะพะทะดะฐะฝะฐ: 2025-09-16 21:00:00*
*ะกัะฐััั: ะะะขะะะ ะ ะะะะะะะจะะะฃ* โ
