# üåç –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üìã –û–±–∑–æ—Ä

–ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **5 —è–∑—ã–∫–æ–≤**:
- üá∑üá∫ **–†—É—Å—Å–∫–∏–π** (`ru`) - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
- üá¨üáß **–ê–Ω–≥–ª–∏–π—Å–∫–∏–π** (`en`) 
- üá∑üá∏ **–°–µ—Ä–±—Å–∫–∏–π** (`sr`)
- üá©üá™ **–ù–µ–º–µ—Ü–∫–∏–π** (`de`)
- üá™üá∏ **–ò—Å–ø–∞–Ω—Å–∫–∏–π** (`es`)

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
locales/
‚îú‚îÄ‚îÄ ru/translations.json    # –†—É—Å—Å–∫–∏–π (–æ—Å–Ω–æ–≤–Ω–æ–π)
‚îú‚îÄ‚îÄ en/translations.json    # –ê–Ω–≥–ª–∏–π—Å–∫–∏–π
‚îú‚îÄ‚îÄ sr/translations.json    # –°–µ—Ä–±—Å–∫–∏–π
‚îú‚îÄ‚îÄ de/translations.json    # –ù–µ–º–µ—Ü–∫–∏–π
‚îî‚îÄ‚îÄ es/translations.json    # –ò—Å–ø–∞–Ω—Å–∫–∏–π
```

## üîß –°–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **`I18nManager`** - –º–µ–Ω–µ–¥–∂–µ—Ä –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- **`I18nMiddleware`** - middleware –¥–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞** –ø–æ Telegram language code

### –ú–∞–ø–ø–∏–Ω–≥ —è–∑—ã–∫–æ–≤:
```python
language_mapping = {
    "ru": "ru",      # –†—É—Å—Å–∫–∏–π
    "en": "en",      # –ê–Ω–≥–ª–∏–π—Å–∫–∏–π
    "sr": "sr",      # –°–µ—Ä–±—Å–∫–∏–π
    "de": "de",      # –ù–µ–º–µ—Ü–∫–∏–π
    "es": "es",      # –ò—Å–ø–∞–Ω—Å–∫–∏–π
    "hr": "sr",      # –•–æ—Ä–≤–∞—Ç—Å–∫–∏–π -> –°–µ—Ä–±—Å–∫–∏–π
    "bs": "sr",      # –ë–æ—Å–Ω–∏–π—Å–∫–∏–π -> –°–µ—Ä–±—Å–∫–∏–π
    "me": "sr",      # –ß–µ—Ä–Ω–æ–≥–æ—Ä—Å–∫–∏–π -> –°–µ—Ä–±—Å–∫–∏–π
    "at": "de",      # –ê–≤—Å—Ç—Ä–∏–π—Å–∫–∏–π -> –ù–µ–º–µ—Ü–∫–∏–π
    "ch": "de",      # –®–≤–µ–π—Ü–∞—Ä—Å–∫–∏–π -> –ù–µ–º–µ—Ü–∫–∏–π
    "mx": "es",      # –ú–µ–∫—Å–∏–∫–∞–Ω—Å–∫–∏–π -> –ò—Å–ø–∞–Ω—Å–∫–∏–π
    "ar": "es",      # –ê—Ä–≥–µ–Ω—Ç–∏–Ω—Å–∫–∏–π -> –ò—Å–ø–∞–Ω—Å–∫–∏–π
    "co": "es",      # –ö–æ–ª—É–º–±–∏–π—Å–∫–∏–π -> –ò—Å–ø–∞–Ω—Å–∫–∏–π
    "uk": "ru",      # –£–∫—Ä–∞–∏–Ω—Å–∫–∏–π -> –†—É—Å—Å–∫–∏–π
    "be": "ru",      # –ë–µ–ª–æ—Ä—É—Å—Å–∫–∏–π -> –†—É—Å—Å–∫–∏–π
    "kk": "ru",      # –ö–∞–∑–∞—Ö—Å–∫–∏–π -> –†—É—Å—Å–∫–∏–π
}
```

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã:
- **`commands`** - –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ (`/start`, `/help`, `/status`)
- **`consent`** - —Å–æ–≥–ª–∞—Å–∏–µ —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
- **`gender`** - –≤—ã–±–æ—Ä –ø–æ–ª–∞ –∫–æ–º–ø–∞–Ω—å–æ–Ω–∞
- **`messages`** - —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- **`persons`** - –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –∏ –∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **`premium`** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–µ
- **`privacy`** - –ø–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
- **`errors`** - —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- **`success`** - —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ
- **`buttons`** - —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–æ–∫
- **`ai_prompts`** - –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –ò–ò

### –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
```json
{
  "commands": {
    "start": {
      "welcome": "–ü—Ä–∏–≤–µ—Ç! –£ —Ç–µ–±—è {free_limit} –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –¥–µ–Ω—å.",
      "already_started": "–ë–æ—Ç —É–∂–µ –∑–∞–ø—É—â–µ–Ω - –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ üòä"
    },
    "status": {
      "title": "üìä –°—Ç–∞—Ç—É—Å –∞–∫–∫–∞—É–Ω—Ç–∞",
      "remaining_free": "–£ —Ç–µ–±—è –æ—Å—Ç–∞–ª–æ—Å—å {remaining} –∏–∑ {total} –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ —Å–µ–≥–æ–¥–Ω—è"
    }
  }
}
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```python
from shared.i18n import i18n

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —è–∑—ã–∫
i18n.set_language('de')

# –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥
text = i18n.t('commands.start.welcome', free_limit=50)
```

### –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö:
```python
@router.message(Command(commands=["start"]))
async def cmd_start(message: Message, i18n: I18nMiddleware):
    welcome_text = i18n.t('commands.start.welcome', free_limit=50)
    await message.answer(welcome_text)
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞:
```python
# –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —è–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user_lang = i18n.get_user_language(message.from_user.language_code)
i18n.set_language(user_lang)
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤:
```bash
python test_localization.py
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
```bash
python test_integration.py
```

### –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
```python
from shared.i18n import i18n

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —è–∑—ã–∫–∏
print(i18n.get_available_languages())

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —è–∑—ã–∫
for lang in ['ru', 'en', 'sr', 'de', 'es']:
    i18n.set_language(lang)
    print(f"{lang}: {i18n.t('commands.start.welcome', free_limit=50)}")
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

| –Ø–∑—ã–∫ | –ö–æ–¥ | –°—Ç–∞—Ç—É—Å | –ö–ª—é—á–µ–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|--------|--------|----------|
| üá∑üá∫ –†—É—Å—Å–∫–∏–π | `ru` | ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π | 183 | –Ø–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
| üá¨üáß –ê–Ω–≥–ª–∏–π—Å–∫–∏–π | `en` | ‚úÖ –ü–æ–ª–Ω—ã–π | 183 | –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π |
| üá∑üá∏ –°–µ—Ä–±—Å–∫–∏–π | `sr` | ‚úÖ –ü–æ–ª–Ω—ã–π | 183 | –ë–∞–ª–∫–∞–Ω—Å–∫–∏–π —Ä–µ–≥–∏–æ–Ω |
| üá©üá™ –ù–µ–º–µ—Ü–∫–∏–π | `de` | ‚úÖ –ü–æ–ª–Ω—ã–π | 183 | –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ï–≤—Ä–æ–ø–∞ |
| üá™üá∏ –ò—Å–ø–∞–Ω—Å–∫–∏–π | `es` | ‚úÖ –ü–æ–ª–Ω—ã–π | 183 | –õ–∞—Ç–∏–Ω—Å–∫–∞—è –ê–º–µ—Ä–∏–∫–∞ |

## üîÑ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —è–∑—ã–∫–∞

### 1. –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:
```bash
mkdir locales/[–∫–æ–¥_—è–∑—ã–∫–∞]
```

### 2. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –ø–µ—Ä–µ–≤–æ–¥–æ–≤:
```bash
cp locales/ru/translations.json locales/[–∫–æ–¥_—è–∑—ã–∫–∞]/translations.json
```

### 3. –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:
- –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ —Ä—É—Å—Å–∫–∏–µ —Ç–µ–∫—Å—Ç—ã –Ω–∞ —Ü–µ–ª–µ–≤–æ–π —è–∑—ã–∫
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É JSON
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å JSON

### 4. –û–±–Ω–æ–≤–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥:
```python
# –í app/shared/i18n/__init__.py
language_mapping = {
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —è–∑—ã–∫–∏
    "–Ω–æ–≤—ã–π_–∫–æ–¥": "–Ω–æ–≤—ã–π_–∫–æ–¥",
}
```

### 5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:
```bash
python test_localization.py
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `{–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è}` –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–π
- –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —ç–º–æ–¥–∑–∏ –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
- –ù–µ –∏–∑–º–µ–Ω—è–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–ª—é—á–µ–π

### –ö–∞—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–≤–æ–¥–æ–≤:
- –ü–µ—Ä–µ–≤–æ–¥—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –¥–ª—è –Ω–æ—Å–∏—Ç–µ–ª–µ–π —è–∑—ã–∫–∞
- –£—á–∏—Ç—ã–≤–∞–π—Ç–µ –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- –ü–µ—Ä–µ–≤–æ–¥—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –ø–∞–º—è—Ç–∏
- Fallback –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞**
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 5 —è–∑—ã–∫–æ–≤ —Å –ø–æ–ª–Ω—ã–º–∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏**
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
‚úÖ **Fallback —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏**
‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É**

**–ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üåç
